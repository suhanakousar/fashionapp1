# AUTO-GENERATED BY KIRO
# Enhanced Fusion Prompt Templates for Fashion Garment Assembly

## Template 1: Silhouette-First Mode
**Use case**: Preserve mannequin silhouette and drape; bring patterns/colors from fabric images

### Positive Prompt
```
Photorealistic full-body [CATEGORY] garment on the canonical mannequin. Preserve the silhouette, pose, and drape of the mannequin. Apply texture and color palette from the uploaded fabric images: top: [FABRIC_TOP_DESCRIPTION], bottom: [FABRIC_BOTTOM_DESCRIPTION], trims: [FABRIC_TRIMS_DESCRIPTION]. Keep seams natural and realistic fabric folds. Maintain skin tones and do NOT alter face. Wearable couture — realistic lighting and shadows.
```

### Negative Prompt
```
no faces, no logos, no text, no watermarks, avoid surreal distortions, distorted faces, low quality, blurry, distorted shapes, extra limbs, missing limbs, bad anatomy, deformed, ugly, duplicate, mutilated, extra fingers, mutated hands, poorly drawn hands, poorly drawn face, mutation, deformed, bad proportions, extra limbs, cloned face, disfigured, out of frame, ugly, extra limbs, bad anatomy, gross proportions, malformed limbs, missing arms, missing legs, extra arms, extra legs, mutated hands, fused fingers, too many fingers, long neck
```

### Parameters
```yaml
strength: 0.35-0.5  # Lower strength to preserve silhouette
guidance_scale: 7.5-9.0
num_inference_steps: 20-35
controlnet_weight: 1.0  # Strong control to preserve edges
```

---

## Template 2: Texture-First Mode
**Use case**: Prioritize fabric motif fidelity; adapt silhouette gently

### Positive Prompt
```
Photorealistic garment emphasizing fabric motif fidelity. Transfer the exact pattern and texture from the uploaded fabrics (top: [FABRIC_TOP_DESCRIPTION], bottom: [FABRIC_BOTTOM_DESCRIPTION], trims: [FABRIC_TRIMS_DESCRIPTION]) onto the target garment region(s). Ensure the pattern placement is coherent and repeats naturally. Keep silhouette consistent but allow texture to define final shape. No face changes.
```

### Negative Prompt
```
(same as Template 1)
```

### Parameters
```yaml
strength: 0.5-0.7  # Higher strength for texture transfer
guidance_scale: 7.0-8.5
num_inference_steps: 25-35
controlnet_weight: 0.8  # Moderate control
```

---

## Template 3: Hybrid Mode
**Use case**: Balanced fusion of silhouette and texture

### Positive Prompt
```
Balanced fusion: preserve silhouette while integrating strong motif & color cues from fabrics (top: [FABRIC_TOP_DESCRIPTION], bottom: [FABRIC_BOTTOM_DESCRIPTION], trims: [FABRIC_TRIMS_DESCRIPTION]). Ensure realistic seams and shading. Photorealistic [CATEGORY] on mannequin with natural drape. No face changes.
```

### Negative Prompt
```
(same as Template 1)
```

### Parameters
```yaml
strength: 0.45-0.6  # Balanced strength
guidance_scale: 7.5-8.5
num_inference_steps: 25-30
controlnet_weight: 0.9  # Balanced control
```

---

## Dynamic Prompt Construction

### Variables to Extract:
- `[CATEGORY]`: "lehenga", "blouse", "gown", "saree", "salwar", "dress", "top", "skirt", "other"
- `[FABRIC_TOP_DESCRIPTION]`: Auto-filled from fabric analysis
  - Format: `[pattern] pattern in colors [color1], [color2], [color3]`
  - Example: `paisley pattern in colors #ff6b6b, #9b59ff, #ff8fb1`
- `[FABRIC_BOTTOM_DESCRIPTION]`: Same format as top
- `[FABRIC_TRIMS_DESCRIPTION]`: Same format, or "buttons/motif: [description]"

### Example Generated Prompt (Silhouette-First):
```
Photorealistic full-body lehenga garment on the canonical mannequin. Preserve the silhouette, pose, and drape of the mannequin. Apply texture and color palette from the uploaded fabric images: top: paisley pattern in colors #ff6b6b, #9b59ff, #ff8fb1, bottom: floral pattern in colors #0b0f12, #ff6b6b, trims: geometric buttons/motif in #9b59ff, #ff8fb1. Keep seams natural and realistic fabric folds. Maintain skin tones and do NOT alter face. Wearable couture — realistic lighting and shadows.
```

### Region Mapping Instructions:
Include explicit mention of region mapping in prompts:
- For lehenga: "apply fabricTop to blouse region, fabricBottom to skirt region"
- For saree: "apply fabricTop to pallu region, fabricBottom to body region"
- For gown: "apply fabricTop to bodice region, fabricBottom to skirt region"

---

## REVIEW REQUIRED
- Face detection and masking policy
- Negative prompt terms (may need adjustment based on model)
- Strength ranges (currently 0.35-0.7, may need tuning per category)
- ControlNet weight values (may need per-category tuning)
